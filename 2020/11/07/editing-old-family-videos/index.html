<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Editing old family videos - Shallow and Pedantic</title><meta name=Description content="A person/tech/code blog of a coder/techie/person. Like calculus in a kiddie pool, the author of this blog is known to be quite shallow and pedantic."><meta property="og:title" content="Editing old family videos"><meta property="og:description" content="Messing with old video from tapes, simple audio corrections, splitting and organizing for the family&rsquo;s benefit."><meta property="og:type" content="article"><meta property="og:url" content="https://lutzky.net/2020/11/07/editing-old-family-videos/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-07T00:00:00+00:00"><meta property="article:modified_time" content="2023-01-18T12:59:57+00:00"><meta property="og:site_name" content="Shallow and Pedantic"><meta name=twitter:card content="summary"><meta name=twitter:title content="Editing old family videos"><meta name=twitter:description content="Messing with old video from tapes, simple audio corrections, splitting and organizing for the family&rsquo;s benefit."><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://lutzky.net/2020/11/07/editing-old-family-videos/><link rel=prev href=https://lutzky.net/2019/07/12/asscover/><link rel=next href=https://lutzky.net/2020/12/10/wfh-wifi/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Editing old family videos","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/lutzky.net\/2020\/11\/07\/editing-old-family-videos\/"},"genre":"posts","wordcount":996,"url":"https:\/\/lutzky.net\/2020\/11\/07\/editing-old-family-videos\/","datePublished":"2020-11-07T00:00:00+00:00","dateModified":"2023-01-18T12:59:57+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Ohad Lutzky"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Shallow and Pedantic">Shallow and Pedantic</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/stuff/>Stuff </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shallow and Pedantic">Shallow and Pedantic</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/stuff/ title>Stuff</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Editing old family videos</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Ohad Lutzky</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2020-11-07>2020-11-07</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;996 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;5 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#audio-corrections>Audio corrections</a></li><li><a href=#splitting-video>Splitting video</a></li></ul></nav></div></div><div class=content id=content><p>In the 90s, my family (along with much of the rest of the world) filmed a lot of home videos. At some point we converted them to what we believed to be DVD for preservation and ease-of-access, but this was actually VCD (which has somewhat worse compatibility), burned on CD-R (which degrades faster than you might think), and optical media has pretty much become extinct as well. In a family visit in 2018 I found the old stash of original video cassettes, flew them with me from Israel to Ireland, and got a local shop called DVD Centre to re-rip them - these guys provide the great service of uploading directly to Dropbox.</p><p>I&rsquo;ve been spending some sporadic time on weekends rewatching all of these, cataloguing them into what Googlers call a &ldquo;one-pager&rdquo; - a long document that may span many pages if printed out, but can be loaded by normal software with simple search functionality (a Google Doc, in my case). This is great for searching by name or event to more easily locate the right video. The tapes are still quite long though - usually 1-2 hours, and can be logically split into smaller segments. They also often have audio issues, such as audio only coming out of one side or having very inconsistent volume.</p><p>For the last few weekends (2020 is a weird year that gives me more time to do this kind of thing), I&rsquo;ve been working my way through the videos, correcting audio and splitting them into smaller logical chunks. I&rsquo;ve uploaded them to Google Drive and shared with my family, who can now easily access them right from their phones from a different continent. It&rsquo;s been bringing back many memories and feels like a worth preservation effort for these memories.</p><p>Here&rsquo;s my workflow, in case it&rsquo;s useful for anyone else:</p><h2 id=audio-corrections>Audio corrections</h2><p>First, split the audio stream into a separate file so you can modify it with the software of your choice. I use <code>ffmpeg</code> for this. The <code>ffprobe</code> program lets me determine the current audio type, which is <code>aac</code> in my case, so I do:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ffmpeg -i ORIGINAL_VIDEO.mov -vn -acodec copy output-audio.aac
</span></span></code></pre></td></tr></table></div></div><p>Now I open <code>output-audio.aac</code> in Audacity, and perform:</p><ol><li>If only one audio stream is available, downmix stereo to mono so it at least comes out of both speakers. (Tracks -> Mix -> Mix Stereo down to Mono)</li><li>Normalize, to get the baseline audio levels comfortable (Effects -> Normalize)</li><li>As a personal choice, to get the audio levels consistent, I apply extremely aggressive compression - Effects -> Compressor, lowest possible threshold (-60 dB here), maximal possible ratio (10:1), attack time of 0.2 seconds and release time of 1.0 seconds. This destroys any dynamic range, but the forced consistency of audio levels helped me pick up what people are saying - they were being recorded from various distances at varying noise levels.</li></ol><p>There&rsquo;s a lot more processing you can do here (graphic equalization may be a good idea), but the ones I described worked well as &ldquo;catch-all&rdquo; fixes that I could apply to all audio without thinking about it too much.</p><p>Export this in the same audio format (again, aac in my case - I&rsquo;d use <code>ffprobe</code> on the original to see the approximate bitrate, but it&rsquo;s not necessary to match it precisely), and recombine like so:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ffmpeg -i ORIGINAL_VIDEO.mov -i output-audio-fixed.aac -c:v copy -map 0✌️0 -map 1🅰️0 ORIGINAL_VIDEO_sound_fixed.mov
</span></span></code></pre></td></tr></table></div></div><p>This method was both faster and more flexible than using the video editors I have at my disposable.</p><h2 id=splitting-video>Splitting video</h2><blockquote><p>Note from the future (2021-12-25): <a href=https://mifi.no/losslesscut/ target=_blank rel="noopener noreffer">LosslessCut</a> does a <em>far</em> better job of this than my hacky scripts, and is far easier to use.</p></blockquote><p>At this point, I watch the video through, writing down key points of what&rsquo;s going on with approximate time-codes. It helps to do 3-4 different tapes of this before moving forward, as it gives you a feel for what the &ldquo;logical separation&rdquo; to smaller chunks is. I usually define those chunks as &ldquo;different set of consecutive days&rdquo; (usually just one), but it helps to have all the timecodes available in text so you don&rsquo;t have to re-watch. I recommend using a player that supports faster-than-realtime viewing, such as VLC (speed up, stop on &ldquo;hey what was that&rdquo;, rewind, watch at regular speed). This is the most time-consuming part.</p><p>After this, I decide on the section structure, and need to determine the precise frames where I want to split. Since most video players aren&rsquo;t designed to &ldquo;go back one frame&rdquo;, I actually open the video in a video editor (the free HitFilm Express, in my case). I start with the rough time-codes from the previous step, and step frame-by-frame back-and-forth until I find the first and last usable frames of a section. I write these to a <code>points.txt</code> file with the following syntax:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>00:00:00:00-00:15:48:13
</span></span><span class=line><span class=cl>00:15:50:17-00:40:14:01
</span></span><span class=line><span class=cl>...
</span></span></code></pre></td></tr></table></div></div><p>Here, the format is <code>Hour:Minute:Second:Frame</code> - in my case the video is 25 FPS, so <code>Frame</code> is between <code>00</code> and <code>24</code>.</p><p>Next, I want to split the video using ffmpeg - this can be done without recoding, which is much faster (on my laptop - a few seconds per section, as opposed to multiple minutes) and doesn&rsquo;t degrade quality. For the timecodes above, the correct split commands are:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ffmpeg -ss 0:00:00.000 -i audio_corrected.mov -to 0:15:48.520 -c copy segment_1.mov
</span></span><span class=line><span class=cl>ffmpeg -ss 0:15:50.680 -i audio_corrected.mov -to 0:24:23.360 -c copy segment_2.mov
</span></span></code></pre></td></tr></table></div></div><p>These are annoying to create manually, because:</p><ol><li>The timecode for ffmpeg is given in milliseconds, so 13 frames in 25fps becomes 520 milliseconds.</li><li>The <code>-to</code> offset is from the section&rsquo;s <em>start</em> (so it&rsquo;s more of a <code>-length</code>), and subtraction is hard.</li></ol><p>So, of course, I wrote <a href=https://github.com/lutzky/splitpoints target=_blank rel="noopener noreffer">some code</a> to do this for me. It takes a <code>points.txt</code> as described above, and outputs the appropriate series of commands.</p><p>All that&rsquo;s left to do is to let the commands run, upload the videos, and wait for Google Drive&rsquo;s video-rendering to catch up.</p><p>Good luck on your video preservation adventure!</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2023-01-18</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://lutzky.net/2020/11/07/editing-old-family-videos/><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://lutzky.net/2020/11/07/editing-old-family-videos/ data-title="Editing old family videos" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://lutzky.net/2020/11/07/editing-old-family-videos/ data-title="Editing old family videos"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://lutzky.net/2020/11/07/editing-old-family-videos/ data-title="Editing old family videos"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2019/07/12/asscover/ class=prev rel=prev title=Ass-cover><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Ass-cover</a>
<a href=/2020/12/10/wfh-wifi/ class=next rel=next title="WFH Wifi">WFH Wifi<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.111.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Ohad Lutzky</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://.disqus.com/embed.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},lightgallery:!0,search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1VCTD5H9YR",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-1VCTD5H9YR" async></script></body></html>